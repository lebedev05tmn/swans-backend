# Инструкции по запуску

## Создание базы данных

Перед запуском следует создать базу данных PostgreSQL и назвать ее "swans". Если PostgreSQL у вас еще не установлен, его следует скачать и установить с сайта https://www.enterprisedb.com/downloads/postgres-postgresql-downloads.
На ваш компьютер установится программа pgAdmin, можно воспользоваться ее графическим интерфейсом для создания БД: В левом верхнем углу справа от надписи Object Explorer нажмите на Query Tool,
в открывшемся окне введите запрос `CREATE DATABASE swans` и отправьте запрос клавишей F5.\
\
Также можно создать БД с помощью консоли. Откройте консоль и введите следующие команды:

```
psql -U ваше_имя_пользователя
CREATE DATABASE swans
\q
```

Если после первой команды у вас возникает ошибка "psql не распознано как имя командлета...", то вероятно, что на вашем ПК PostgresSQL не добавлен в системную переменную Path. Погуглите, как его туда добавить.
\
\
Приложение создает таблицу анкеты пользователя, где использует тип данных geography для записи геолокации. Это не встроенный в postgres тип данных, для его использования нужно установить расширение PostGIS. Оно устанавливается через программу Stack Builder, которая идет в комплекте при установке PostgreSQL и ее можно запустить сразу же после установки, либо найти ее позже в установленных файлах (на Windows она расположена по пути C:\Program Files\PostgreSQL\17\bin\stackbuilder.exe). В Stack Builder на первом экране в выпадающем списке нужно выбрать локально установленный PostgreSQL, а на втором отметить галочкой PostGIS в категории Spatial Extensions. Дальше обычная установка по принципу "далее-далее-готово", после которой нужно перейти в БД swans и сделать запрос `CREATE EXTENSION postgis`

## Установка переменных окружения

В проекте есть файл .env.example, в нем есть список переменных, которые вы должны заполнить своими данными следующим образом:

```
DB_NAME=swans
DB_USERNAME=ваш_логин_в_postgre (если не устанавливали его - пишите postgres)
DB_PASSWORD=ваш_пароль_в_postgre
DB_PORT=5432 (либо тот, который вы указывали при установке PostgreSQL)

PORT=8080

MINIO_ROOT_USER=admin
MINIO_ROOT_PASSWORD=password
MINIO_PORT=9000
```

**ВАЖНО:** При заполнении этих переменных НЕ НУЖНО ставить кавычки.\
После заполнения всех переменных переименуйте .env.example в .env

## Запуск

Запустить программу можно консольной командой `yarn dev:win` если вы пользуетесь Windows либо `yarn dev:other` если пользуетесь чем-то другим. Документация Swagger будет расположена по адресу
http://localhost:8080/api/docs.
